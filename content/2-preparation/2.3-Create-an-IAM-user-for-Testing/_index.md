+++
title = "Create an IAM user for Testing"
date = 2025
weight = 3
chapter = false
pre = "<b>2.3. </b>"
+++

## Create an IAM user for Testing

In this section, we attach the policy to the previously created role to ensure the role has the appropriate permissions defined in the policy.

1. Access **IAM Dashboard**

   - Search for the **IAM**.
   - Click it to access **IAM Dashboard**.

   ![IAM](/images/2/2.3/IAM_Dashboard.png?width=90pc)

2. Create a IAM policy in **IAM Dashboard**
   - Look for **Policies** in the side panel, select **Create policy**.

   ![IAM](/images/2/2.3/Create_policy.png?width=90pc)
   
   - Under **Specify permission** within the **Policy editor** click the **JSON** to switch to **JSON** format and then paste the JSON below into the editor.

```json
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Sid": "VisualEditor0",
            "Effect": "Deny",
            "Action": [
                "ec2:TerminateInstances",
                "ec2:DeleteTags",
                "ec2:CreateTags"
            ],
            "Resource": "*",
            "Condition": {
                "StringEquals": {
                    "aws:ResourceTag/status": "isolated"
                }
            }
        }
    ]
}
```

   ![IAM](/images/2/2.3/Create_policy_add_policy.png?width=90pc)

   - After that click **Next**.
   - In the **Review and create** under _Policy details_, name the policy : `Deny-termination-of-isolated-instances`.

   ![IAM](/images/2/2.3/Create_policy_naming.png?width=90pc)

   - Leaves the rest unchanged, click the **Create policy**. This should take you back to the **Policy** Interface.

{{% notice info %}}
In real life scenario the authors recommend using [Service control policies (SCP)](https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_scps.html)
{{% /notice %}}

3. Create a **Group**
   - In the **Policy** Interface, In the side panel you should see **User groups** access it.
   - Click **Create Group**.
   
   ![IAM](/images/2/2.3/Create_group.png?width=90pc)

   - Under **Create user group**, **name** the group : `ec2-user`.
   - Under **Attach permissions policies**, attach these policies to the group : 
      - The `AmazonEC2FullAccess` AWS Managed Policy
      - The prior created `Deny-termination-of-isolated-instances`
   
   ![IAM](/images/2/2.3/Create_group_naming.png?width=90pc)
   
   - Click **Create group**, the results should be like this.
   
   ![IAM](/images/2/2.3/Create_group_result.png?width=90pc)
   
1. Create a **user**
   - Head back in the side panel click the **Users** and click **Create user**.

   ![IAM](/images/2/2.3/Create_user.png?width=90pc)

   - Under _Specify user details_, name the **User name** is : `testuser`.
   - Select **yes** for the _Provide user access to the AWS Management console_.
   - Select _I want to create an IAM user_, You can choose **autogenerated password** or **custom password**.
   - You can unselect _User must create a new password at next sign-in_ as shown below.

   ![IAM](/images/2/2.3/Create_user_details.png?width=90pc)
   
   - Click **next** to go to the **Set permission** interface.
   - Under _Permissions options_ leave it as **Add a user to group**.
   - Under _User groups_ add the user to the **prior created ec2-users**.
   
   ![IAM](/images/2/2.3/Create_user_set_permission.png?width=90pc)

   - Proceed next to **Create user**.

{{% notice info %}}
You should copy the password to a notepad or a text editor if you choose the **autogenerated password** avoid losing access to the account.
{{% /notice %}}

   - After the _user creation_, the user should have permission like below  

   ![IAM](/images/2/2.3/Create_user_result.png?width=90pc)

{{% notice info %}}
This is just for demo purposes, to show that once the instance is tagged as isolated,
 the regular users with this policy will not be able to terminate the instance.
 In real life you should follow the best practice of using only temporary credentials,
 as per Well-Architected-Framework's [best practice](https://docs.aws.amazon.com/en_us/wellarchitected/latest/framework/sec-02.html)
{{% /notice %}}

After **testuser creation** is complete, head on to the next step [Configure Response](../../3-Configure-Response)
